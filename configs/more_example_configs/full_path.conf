# =============================================================================
# NGINX-STYLE CONFIGURATION - TESTING FULL PATH RESOLUTION
# =============================================================================
# This configuration tests the nginx-style path resolution implementation
# All paths are absolute/full paths, following nginx conventions
# =============================================================================

server {
	server_name nginx_test
	listen 8085
	host 127.0.0.1
	root webserver/www/webserv_project
	index index.html
	client_max_body_size 10000

	# ROOT: Main landing page with file upload/delete links
	location / {
		allow_methods GET
		autoindex on
		index index.html
	}

	# UPLOADS: File upload/download/delete using full paths (nginx-style)
	location /uploads {
		allow_methods GET DELETE POST
		upload_to webserver/www/webserv_project/uploads
		autoindex on
		index index.html
	}

	# CGI SCRIPTS: Python and JavaScript execution using full paths
	location /cgi-bin {
		allow_methods GET POST
		cgi_path webserver/www/webserv_project/cgi-bin
		cgi_ext .py .js
		index index.html
	}

	# PYTHON SCRIPTS: Single Python files using full path
	location .py {
		allow_methods GET POST
		cgi_path webserver/www
		cgi_ext .py
		index index.html
	}

	# IMAGES: Directory listing for actual image files
	location /imgs {
		allow_methods GET
		autoindex on
		index index.html
	}

	# UPLOAD PAGE: Static upload form
	location /upload.html {
		allow_methods GET POST
		index upload.html
	}

	# DELETE PAGE: Static delete form
	location /delete.html {
		allow_methods GET DELETE
		index delete.html
	}

	# FAVICON: Static favicon file
	location /favicon.ico {
		allow_methods GET
		index index.html
		autoindex off
	}
}
